<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"/>
    <title>Administration - Gestion des Produits</title>
    <link rel="stylesheet" href="exe.css">
</head>
<body>
    <div class="container">
        
        <div id="loginPage">
            <div class="header">
                <h1>üîê Administration DOVV</h1>
                <p>Connectez-vous pour g√©rer les produits</p>
            </div>

            <div style="padding: 2rem;">
                <div id="loginMessage"></div>

                <form id="loginForm">
                    <div class="form-group">
                        <label for="username">Nom d'utilisateur:</label>
                        <input type="text" id="username" name="username" required>
                    </div>

                    <div class="form-group">
                        <label for="password">Mot de passe:</label>
                        <input type="password" id="password" name="password" required>
                    </div>

                    <button type="submit" class="btn">Se connecter</button>
                </form>

                <div style="margin-top: 1rem; padding: 1rem; background: #e9ecef; border-radius: 10px; text-align: center;">
                    <small><strong>Identifiants</strong><br>
                    Utilisateur ou Email<br>
                    et votre mot de passe</small>
                </div>
            </div>
        </div>

        
        <div id="adminPage" class="hidden">
            <div class="admin-header">
                <div class="welcome-msg">
                    <strong>Bienvenue, Administrateur DOVV! üëã</strong>
                </div>
                <button id="logoutBtn" class="btn btn-secondary btn-small">D√©connexion</button>
            </div>

            <div style="padding: 2rem;">
                <div id="adminMessage"></div>
                <div class="statistics-section">
                    <h2 style="margin-bottom: 1rem; color: #333;">üìä Statistiques G√©n√©rales</h2>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-number" id="totalProducts">0</div>
                            <div class="stat-label">Produits Total</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="totalValue">0</div>
                            <div class="stat-label">Valeur Stock (FCFA)</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="totalStock">0</div>
                            <div class="stat-label">Unit√©s en Stock</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="averagePrice">0</div>
                            <div class="stat-label">Prix Moyen (FCFA)</div>
                        </div>
                    </div>
                </div>

                
                <div class="price-adjustment-section">
                    <h2 style="margin-bottom: 1rem; color: #333;">üí∞ Gestion des Prix</h2>
                    <div class="adjustment-controls">
                        <div>
                            <label for="adjustmentCategory">Cat√©gorie:</label>
                            <select id="adjustmentCategory">
                                <option value="all">Tous les produits</option>
                                <option value="√âlectronique">√âlectronique</option>
                                <option value="V√™tements">V√™tements</option>
                                <option value="Maison & Jardin">Maison & Jardin</option>
                                <option value="Sports & Loisirs">Sports & Loisirs</option>
                                <option value="Livres & M√©dias">Livres & M√©dias</option>
                                <option value="Beaut√© & Sant√©">Beaut√© & Sant√©</option>
                                <option value="Alimentation">Alimentation</option>
                            </select>
                        </div>
                        <div>
                            <label for="adjustmentValue">Pourcentage (+ ou -):</label>
                            <input type="number" id="adjustmentValue" placeholder="Ex: 10 pour +10%, -5 pour -5%" step="0.1">
                        </div>
                        <div style="display: flex; align-items: end; gap: 0.5rem;">
                            <button class="btn" onclick="adjustPrices()">Appliquer l'ajustement</button>
                        </div>
                        <div style="display: flex; align-items: end;">
                            <button class="btn btn-secondary" onclick="resetPrices()">R√©initialiser Prix</button>
                        </div>
                    </div>
                </div>

                <div style="background: #f8f9fa; padding: 2rem; border-radius: 15px; margin-bottom: 2rem;">
                    <h2 style="margin-bottom: 1.5rem; color: #333;">üì¶ Ajouter un nouveau produit</h2>
                    
                    <form id="productForm">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="productName">Nom du produit:</label>
                                <input type="text" id="productName" name="productName" required>
                            </div>

                            <div class="form-group">
                                <label for="productCategory">Cat√©gorie:</label>
                                <select id="productCategory" name="productCategory" required>
                                    <option value="">S√©lectionner une cat√©gorie</option>
                                    <option value="√âlectronique">√âlectronique</option>
                                    <option value="V√™tements">V√™tements</option>
                                    <option value="Maison & Jardin">Maison & Jardin</option>
                                    <option value="Sports & Loisirs">Sports & Loisirs</option>
                                    <option value="Livres & M√©dias">Livres & M√©dias</option>
                                    <option value="Beaut√© & Sant√©">Beaut√© & Sant√©</option>
                                    <option value="Alimentation">Alimentation</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="productPrice">Prix (FCFA):</label>
                                <input type="number" id="productPrice" name="productPrice" min="0" step="100" required>
                            </div>

                            <div class="form-group">
                                <label for="productStock">Stock disponible:</label>
                                <input type="number" id="productStock" name="productStock" min="0" required>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="productDescription">Description:</label>
                            <textarea id="productDescription" name="productDescription" placeholder="Description d√©taill√©e du produit..." required></textarea>
                        </div>

                        <div class="form-group">
                            <label for="productImage">URL de l'image (optionnel):</label>
                            <input type="text" id="productImage" name="productImage" placeholder="https://exemple.com/image.jpg">
                        </div>

                        <button type="submit" class="btn">‚ûï Ajouter le produit</button>
                    </form>
                </div>

                
                <div>
                    <h2 style="margin-bottom: 1.5rem; color: #333;">üìã Liste des produits (<span id="productCount">0</span>)</h2>
                    <div id="productsList" class="products-grid"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let isLoggedIn = false;
        let currentFilter = 'all';
        let products = [
            {
                id: 1,
                name: "Smartphone Samsung Galaxy",
                category: "√âlectronique",
                price: 250000,
                originalPrice: 250000,
                stock: 15,
                description: "Smartphone derni√®re g√©n√©ration avec √©cran OLED et appareil photo 108MP",
                image: "",
                priceChanged: false
            },
            {
                id: 2,
                name: "T-shirt Coton Bio",
                category: "V√™tements",
                price: 15000,
                originalPrice: 15000,
                stock: 50,
                description: "T-shirt en coton biologique, confortable et √©co-responsable",
                image: "",
                priceChanged: false
            },
            {
                id: 3,
                name: "Ordinateur Portable HP",
                category: "√âlectronique",
                price: 450000,
                originalPrice: 450000,
                stock: 8,
                description: "Ordinateur portable 15 pouces, 8GB RAM, SSD 256GB",
                image: "",
                priceChanged: false
            },
            {
                id: 4,
                name: "Chaise de Bureau",
                category: "Maison & Jardin",
                price: 85000,
                originalPrice: 85000,
                stock: 25,
                description: "Chaise ergonomique avec support lombaire",
                image: "",
                priceChanged: false
            }
        ];
        let nextId = 5;

        
        const loginPage = document.getElementById('loginPage');
        const adminPage = document.getElementById('adminPage');
        const loginForm = document.getElementById('loginForm');
        const productForm = document.getElementById('productForm');
        const logoutBtn = document.getElementById('logoutBtn');
        const productsList = document.getElementById('productsList');
        const productCount = document.getElementById('productCount');

       
        loginForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            
            if (username === 'admin' && password === 'admin123') {
                isLoggedIn = true;
                showMessage('loginMessage', 'Connexion r√©ussie!', 'success');
                
                setTimeout(() => {
                    loginPage.classList.add('hidden');
                    adminPage.classList.remove('hidden');
                    updateStatistics();
                    displayProducts();
                }, 1000);
            } else {
                showMessage('loginMessage', 'Identifiants incorrects!', 'error');
            }
        });

       
        logoutBtn.addEventListener('click', function() {
            isLoggedIn = false;
            loginPage.classList.remove('hidden');
            adminPage.classList.add('hidden');
            loginForm.reset();
            showMessage('loginMessage', 'D√©connexion r√©ussie!', 'success');
        });

        
        productForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            if (!isLoggedIn) return;
            
            const formData = new FormData(productForm);
            const price = parseInt(formData.get('productPrice'));
            const newProduct = {
                id: nextId++,
                name: formData.get('productName'),
                category: formData.get('productCategory'),
                price: price,
                originalPrice: price,
                stock: parseInt(formData.get('productStock')),
                description: formData.get('productDescription'),
                image: formData.get('productImage') || '',
                priceChanged: false
            };
            
            products.push(newProduct);
            showMessage('adminMessage', `Produit "${newProduct.name}" ajout√© avec succ√®s!`, 'success');
            productForm.reset();
            updateStatistics();
            displayProducts();
        });

        
        function displayProducts() {
            productsList.innerHTML = '';
            
            const filteredProducts = currentFilter === 'all' ? 
                products : products.filter(p => p.category === currentFilter);
            
            productCount.textContent = filteredProducts.length;
            
            filteredProducts.forEach(product => {
                const priceChangeIndicator = getPriceChangeIndicator(product);
                const productCard = document.createElement('div');
                productCard.className = 'product-card';
                productCard.innerHTML = `
                    <h3>${product.name}</h3>
                    <p><strong>Cat√©gorie:</strong> ${product.category}</p>
                    <p><strong>Stock:</strong> ${product.stock} unit√©s</p>
                    <p><strong>Description:</strong> ${product.description}</p>
                    <p class="product-price">${product.price.toLocaleString()} FCFA${priceChangeIndicator}</p>
                    ${product.originalPrice !== product.price ? `<p style="font-size: 0.9rem; color: #666;"><em>Prix original: ${product.originalPrice.toLocaleString()} FCFA</em></p>` : ''}
                    <div class="product-actions">
                        <button class="btn btn-small btn-edit" onclick="editProduct(${product.id})">
                            ‚úèÔ∏è Modifier
                        </button>
                        <button class="btn btn-small btn-delete" onclick="deleteProduct(${product.id})">
                            üóëÔ∏è Supprimer
                        </button>
                    </div>
                `;
                productsList.appendChild(productCard);
            });
        }

        
        function getPriceChangeIndicator(product) {
            if (!product.priceChanged) return '';
            
            if (product.price > product.originalPrice) {
                const increase = ((product.price - product.originalPrice) / product.originalPrice * 100).toFixed(1);
                return `<span class="price-change-indicator price-increased">+${increase}%</span>`;
            } else if (product.price < product.originalPrice) {
                const decrease = ((product.originalPrice - product.price) / product.originalPrice * 100).toFixed(1);
                return `<span class="price-change-indicator price-decreased">-${decrease}%</span>`;
            }
            return '';
        }

        
        function updateStatistics() {
            const totalProducts = products.length;
            const totalValue = products.reduce((sum, product) => sum + (product.price * product.stock), 0);
            const totalStock = products.reduce((sum, product) => sum + product.stock, 0);
            const averagePrice = totalProducts > 0 ? Math.round(products.reduce((sum, product) => sum + product.price, 0) / totalProducts) : 0;

            document.getElementById('totalProducts').textContent = totalProducts;
            document.getElementById('totalValue').textContent = totalValue.toLocaleString();
            document.getElementById('totalStock').textContent = totalStock;
            document.getElementById('averagePrice').textContent = averagePrice.toLocaleString();
        }

       
        function adjustPrices() {
            const category = document.getElementById('adjustmentCategory').value;
            const adjustmentValue = parseFloat(document.getElementById('adjustmentValue').value);
            
            if (isNaN(adjustmentValue)) {
                showMessage('adminMessage', 'Veuillez entrer un pourcentage valide!', 'error');
                return;
            }

            let affectedProducts = 0;
            products.forEach(product => {
                if (category === 'all' || product.category === category) {
                    const newPrice = Math.round(product.price * (1 + adjustmentValue / 100));
                    if (newPrice !== product.price) {
                        product.price = newPrice;
                        product.priceChanged = true;
                        affectedProducts++;
                    }
                }
            });

            const categoryText = category === 'all' ? 'tous les produits' : `les produits de la cat√©gorie "${category}"`;
            const adjustmentText = adjustmentValue > 0 ? `augmentation de ${adjustmentValue}%` : `r√©duction de ${Math.abs(adjustmentValue)}%`;
            
            showMessage('adminMessage', `${adjustmentText} appliqu√©e √† ${categoryText} (${affectedProducts} produits affect√©s)`, 'success');
            
            updateStatistics();
            displayProducts();
            
           
            document.getElementById('adjustmentValue').value = '';
        }

        
        function resetPrices() {
            if (confirm('√ätes-vous s√ªr de vouloir r√©initialiser tous les prix √† leurs valeurs originales?')) {
                products.forEach(product => {
                    product.price = product.originalPrice;
                    product.priceChanged = false;
                });
                
                showMessage('adminMessage', 'Tous les prix ont √©t√© r√©initialis√©s!', 'success');
                updateStatistics();
                displayProducts();
            }
        }

       
        function filterProducts(category) {
            currentFilter = category;
            
           
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            displayProducts();
        }

        
        function editProduct(id) {
            const product = products.find(p => p.id === id);
            if (product) {
                const newName = prompt('Nouveau nom:', product.name);
                const newPrice = prompt('Nouveau prix (FCFA):', product.price);
                const newStock = prompt('Nouveau stock:', product.stock);
                
                if (newName && newPrice && newStock) {
                    product.name = newName;
                    product.price = parseInt(newPrice);
                    product.stock = parseInt(newStock);
                    
                    showMessage('adminMessage', `Produit "${product.name}" modifi√©!`, 'success');
                    updateStatistics();
                    displayProducts();
                }
            }
        }

        
        function deleteProduct(id) {
            if (confirm('√ätes-vous s√ªr de vouloir supprimer ce produit?')) {
                const productIndex = products.findIndex(p => p.id === id);
                if (productIndex > -1) {
                    const deletedProduct = products[productIndex];
                    products.splice(productIndex, 1);
                    showMessage('adminMessage', `Produit "${deletedProduct.name}" supprim√©!`, 'success');
                    updateStatistics();
                    displayProducts();
                }
            }
        }

        
        function showMessage(containerId, message, type) {
            const container = document.getElementById(containerId);
            const className = type === 'success' ? 'success-message' : 'error-message';
            container.innerHTML = `<div class="${className}">${message}</div>`;
            
            setTimeout(() => {
                container.innerHTML = '';
            }, 5000);
        }

       
        updateStatistics();
        displayProducts();
    </script>
     <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.min.js" integrity="sha384-7qAoOXltbVP82dhxHAUje59V5r2YsVfBafyUDxEdApLPmsorigin="anonymous"></script>
</body>
</html>